{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import axios from'axios';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const[formData,setFormData]=useState({email:'',password:'',rememberMe:false});const[loading,setLoading]=useState(false);// Load email and password from local storage if Remember Me is checked\nuseEffect(()=>{const rememberedEmail=localStorage.getItem('rememberedEmail');const rememberedPassword=localStorage.getItem('rememberedPassword');const rememberMe=localStorage.getItem('rememberMe')==='true';if(rememberedEmail&&rememberedPassword&&rememberMe){setFormData({...formData,email:rememberedEmail,password:rememberedPassword,rememberMe:true});}},[]);// Run only once on component mount\nconst handleChange=e=>{const value=e.target.type==='checkbox'?e.target.checked:e.target.value;setFormData({...formData,[e.target.name]:value});};const handleSubmit=async e=>{e.preventDefault();setLoading(true);try{const response=await axios.post('/login',formData);if(response.status===200&&response.data.token){localStorage.setItem('token',response.data.token);toast.success('Login successful!');// Remember email and password if Remember Me is checked\nif(formData.rememberMe){localStorage.setItem('rememberedEmail',formData.email);localStorage.setItem('rememberedPassword',formData.password);localStorage.setItem('rememberMe',true);}else{// Clear remembered email and password if Remember Me is unchecked\nlocalStorage.removeItem('rememberedEmail');localStorage.removeItem('rememberedPassword');localStorage.removeItem('rememberMe');}window.location.href='/home';}else{console.error('Login failed:',response);toast.error('Login failed. Please try again.');}}catch(error){console.error('Login failed:',error);if(error.response&&error.response.status===401){toast.error('Invalid username or password. Please try again.');}else{toast.error('Login failed. Please try again.');}}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"Signup_main\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login_container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome To Pocket Saving\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"signup_form\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input_form\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",placeholder:\"Enter Your Email\",value:formData.email,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input_form\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",placeholder:\"Enter Your Password\",value:formData.password,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input_form2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"check\",name:\"rememberMe\",checked:formData.rememberMe,onChange:handleChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"check\",children:\"Remember Me\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"input_form\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:loading?'Loading...':'Submit'})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"login_content\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"I don't have an account \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Signup\"})]})})]})]}),/*#__PURE__*/_jsx(ToastContainer,{})]});}export default Login;","map":{"version":3,"names":["React","useState","useEffect","Link","axios","ToastContainer","toast","jsx","_jsx","jsxs","_jsxs","Login","formData","setFormData","email","password","rememberMe","loading","setLoading","rememberedEmail","localStorage","getItem","rememberedPassword","handleChange","e","value","target","type","checked","name","handleSubmit","preventDefault","response","post","status","data","token","setItem","success","removeItem","window","location","href","console","error","className","children","onSubmit","htmlFor","id","placeholder","onChange","disabled","to"],"sources":["D:/Projects/Pocket Saving/backend/frontend/src/Components/Login.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nfunction Login() {\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    password: '',\r\n    rememberMe: false\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Load email and password from local storage if Remember Me is checked\r\n  useEffect(() => {\r\n    const rememberedEmail = localStorage.getItem('rememberedEmail');\r\n    const rememberedPassword = localStorage.getItem('rememberedPassword');\r\n    const rememberMe = localStorage.getItem('rememberMe') === 'true';\r\n\r\n    if (rememberedEmail && rememberedPassword && rememberMe) {\r\n      setFormData({\r\n        ...formData,\r\n        email: rememberedEmail,\r\n        password: rememberedPassword,\r\n        rememberMe: true\r\n      });\r\n    }\r\n  }, []); // Run only once on component mount\r\n\r\n  const handleChange = (e) => {\r\n    const value = e.target.type === 'checkbox' ? e.target.checked : e.target.value;\r\n    setFormData({ ...formData, [e.target.name]: value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    try {\r\n      const response = await axios.post('/login', formData);\r\n\r\n      if (response.status === 200 && response.data.token) {\r\n        localStorage.setItem('token', response.data.token);\r\n        toast.success('Login successful!');\r\n\r\n        // Remember email and password if Remember Me is checked\r\n        if (formData.rememberMe) {\r\n          localStorage.setItem('rememberedEmail', formData.email);\r\n          localStorage.setItem('rememberedPassword', formData.password);\r\n          localStorage.setItem('rememberMe', true);\r\n        } else {\r\n          // Clear remembered email and password if Remember Me is unchecked\r\n          localStorage.removeItem('rememberedEmail');\r\n          localStorage.removeItem('rememberedPassword');\r\n          localStorage.removeItem('rememberMe');\r\n        }\r\n\r\n        window.location.href = '/home';\r\n      } else {\r\n        console.error('Login failed:', response);\r\n        toast.error('Login failed. Please try again.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Login failed:', error);\r\n      if (error.response && error.response.status === 401) {\r\n        toast.error('Invalid username or password. Please try again.');\r\n      } else {\r\n        toast.error('Login failed. Please try again.');\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"Signup_main\">\r\n      <div className=\"login_container\">\r\n        <h1>Welcome To Pocket Saving</h1>\r\n        <div className=\"signup_form\">\r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"input_form\">\r\n              <label htmlFor=\"email\">Email</label>\r\n              <input\r\n                type=\"email\"\r\n                id=\"email\"\r\n                name=\"email\"\r\n                placeholder=\"Enter Your Email\"\r\n                value={formData.email}\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n            <div className=\"input_form\">\r\n              <label htmlFor=\"password\">Password</label>\r\n              <input\r\n                type=\"password\"\r\n                id=\"password\"\r\n                name=\"password\"\r\n                placeholder=\"Enter Your Password\"\r\n                value={formData.password}\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n            <div className=\"input_form2\">\r\n              <input\r\n                type=\"checkbox\"\r\n                id=\"check\"\r\n                name=\"rememberMe\"\r\n                checked={formData.rememberMe}\r\n                onChange={handleChange}\r\n              />\r\n              <label htmlFor=\"check\">Remember Me</label>\r\n            </div>\r\n            <div className=\"input_form\">\r\n              <button type=\"submit\" disabled={loading}>\r\n                {loading ? 'Loading...' : 'Submit'}\r\n              </button>\r\n            </div>\r\n          </form>\r\n          <div className=\"login_content\">\r\n            <p>I don't have an account <Link to=\"/signup\">Signup</Link></p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <ToastContainer />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}